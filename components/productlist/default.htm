<form class="product-filters">
    <select data-request="onFilter" data-track-input name="category" class="form-control">
        <option value="">All Categories</option>
        {% for cat in categories %}
            <option value="{{ cat.slug }}"
                    {{ filterParams.category == cat.slug ? 'selected' : '' }}>
                {{ cat.title }}
            </option>
        {% endfor %}
    </select>

    <select data-request="onFilter" data-track-input name="brand" class="form-control">
        <option value="">All Brands</option>
        {% for br in brands %}
            <option value="{{ br.slug }}"
                    {{ filterParams.brand == br.slug ? 'selected' : '' }}>
                {{ br.title }}
            </option>
        {% endfor %}
    </select>

    <input data-request="onFilter" data-track-input class="form-control" type="number" name="price_min" placeholder="Min" value="{{ filterParams.priceMin }}">
    <input data-request="onFilter" data-track-input class="form-control" type="number" name="price_max" placeholder="Max" value="{{ filterParams.priceMax }}">

    <select data-request="onFilter" data-track-input name="sort" class="form-control">
        <option value="newest"   {{ filterParams.sort=='newest'   ? 'selected':'' }}>Newest</option>
        <option value="price_asc"  {{ filterParams.sort=='price_asc'? 'selected':'' }}>Price ↑</option>
        <option value="price_desc" {{ filterParams.sort=='price_desc'?'selected':'' }}>Price ↓</option>
    </select>
</form>

<!-- AJAX‐loaded product grid -->
<div id="product-list">
    {% partial '@_products' %}
</div>
